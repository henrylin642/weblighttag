5-LED 6DoF 空間定位：技術原理解析
除了數據傳輸外，硬體配置中的 5 顆特定 LED（4 顆藍色平面 LED + 1 顆突起中央 LED）被設計用於實現精準的 6DoF（六自由度）定位。

1. 空間幾何配置 (Spatial Configuration)
該定位系統依賴於一個稱為 Constellation（星座） 的已知 3D 座標點集：

基座 (Base): 4 顆藍色 LED 分佈在同一個垂直平面上（通常呈矩形矩陣）。這構成了定位的參考平面。
特徵點 (Feature Point): 第 5 顆 LED 位於頭部中央且向前「突起」。這個點與基座平面非共面 (Non-coplanar)，這是提升精度的關鍵。
2. 6DoF 定位原理：PnP 演算法
手機相機通過視圖中這 5 個亮點的 2D 投影位置，反向演算出相機相對於設備的 3D 位置與姿態。

數學核心：Perspective-n-Point (PnP)
基礎: 通過已知 3D 座標與觀測到的 2D 影格亮點，求解相機旋轉（Roll, Pitch, Yaw）與平移（X, Y, Z）。
非共面優勢:
如果所有燈都在同一平面，定位會存在「翻轉歧義」或在傾斜角度較小時精度驟降（尤其是 Pitch 和 Roll）。
第 5 顆「突起」的 LED 提供了極佳的視差 (Parallax) 訊息。當相機角度微調時，突起點相對於平面 4 個點的 2D 位移極為明顯，這消除了數學上的二義性。
3. 定位精度（10cm）的達成條件
在 Web 端環境下，達成 10cm 以內的定位精度是基於以下技術優化：

1. 亞像素中心提取 (Sub-pixel Detection)
相機影格雖然有解析度限制（如 1080p），但通過對 LED 亮點進行重心演算法（Centroid Algorithm），可以獲取精確到 0.1~0.5 像素的座標。

2. 幾何基線 (Baseline)
設備上 4 顆藍燈之間的物理距離形成了定位的基線。基線越大，在遠距離時產生的角解析度越高，從而維持精度。

3. 仿射變換與透視校正
由於 4 顆藍燈在同一平面，這為系統提供了一個現成的 Homography（單應性）參考，能快速校正相機的傾斜並估算初步距離。

4. 誤差控制因子
相機內參: Web 環境無法取得每部手機的工廠校正參數，10cm 的精度容許了使用「通用內參」所產生的微小焦距誤差。
距離限制: 10cm 精度通常保證在 2-4 公尺的有效作業範圍內，這足以應對多數 AR 導覽與設備互動場景。
4. 網頁端背景區隔與採集策略 (Capture & Background Separation)
要在瀏覽器預覽中精準識別 5 顆藍色 LED 並區隔背景，需採取以下複合策略：

1. 硬體級參數壓制 (Exposure/ISO Control)
如同數據讀取需求，定位也必須透過 
applyConstraints
 強制降低曝光：

短曝光 (Short Exposure): 透過極短的曝光時間將背景暗化（Under-exposure），此時只有高亮度的 LED 燈點能穿透感測器閾值。
低 ISO/增益: 減少影像雜訊，避免背景中的微弱反光被誤認為燈點。
2. 色彩空間過濾 (Color Filtering)
藍色 LED 具有獨特的頻譜。在 Web 端處理時，不直接使用 RGB 亮度，而是：

轉換至 HSV 空間: 鎖定 Hue（色相）在藍色範圍（約 210° - 250°），並過濾掉低 Saturation（飽和度）的灰白色背景。
藍色通道差分: 在原始 RGB 中使用 Blue - (Red + Green)/2 的算式，可以有效消除螢光燈或太陽光等白色強光的干擾。
3. 定位前置檢查與方向約束
由於突起 LED 的幾何限制，系統需強制執行：

方向警告: 利用 window.screen.orientation 偵測，若使用者橫放手機則彈出 UI 提示「請垂直握持手機以啟動掃描」。
白平衡鎖定 (WB Lock): 鎖定 whiteBalanceMode 為 manual 或 locked。防止手機自動補償藍色偏色，導致藍色 LED 訊號被 ISP 抹除。
4. 系統啟動與設備發現 (System Activation & Discovery)
這 5 顆 LED 除了解決空間定位外，還承擔了系統的「啟動觸發器」角色：

設備發現 (Device Discovery): 在未偵測到這 5 顆 LED 的幾何星座之前，不進行數據採集。
優點: 這種「低曝光下先定位、後解碼」的邏輯，確保了只有在設備進入視野且對焦正確時才啟動高耗能的數據運算。
5. 總結
這套「4+1」非共面 LED 配置，透過硬體級參數干預與色彩空間過濾，實現在 Web 端將藍色特徵點從複雜背景中剝離的能力。這不僅保障了 10cm 的定位精度，也為隨後的數據解析提供了穩定的空間座標預測。