Led Technology Principles
about 2 hours ago

Review
3-LED 光學 ID 讀取：技術原理解析
本文檔詳細說明了 Antigravity Optical ID Reader 的底層運作機制。該系統利用行動裝置相機讀取特定調變頻率的 LED 水平，實現非接觸式的數據傳輸。

1. 硬體結構 (Hardware Structure)
根據設備外觀（如下所述），Antigravity 讀取器專為以下硬體配置設計：

外觀設計: 綠色貓耳造型機器人（或類似構造之工業模組）。
發光元件:
頭部狀態燈: 位於頭部中央的圓形 LED，主要用於狀態指示（如：啟動中、已連線）。
數據傳輸 LED (核心): 位於身體部位的三層水平發光構造。
這三層水平燈帶即為 PRD 中提到的 3 顆 LED 並行傳輸源。
每一層包含主發光條與側邊輔助燈，透過這三層的亮暗組合，在每個掃描影格中產生 3-bit 的數據符號。
2. 物理層與調變 (Physical Layer)
3-LED 配置
硬體: 設備配備 3 顆獨立控制的 LED。
空間復用: 3 顆 LED 同時發光，每個影格（Frame）可提供 3 bits 的並行數據。
狀態調變: 使用 On-Keying (OK) 的變體，透過 LED 的亮 (High) 與暗 (Low) 來表示邏輯 1 與 0。
符號映射 (Symbol Mapping)
每影格的 3 顆 LED 狀態組合對應一個 0 到 7 的符號：

LED 0 (MSB) | LED 1 | LED 2 (LSB) = 3-bit Symbol
例如：[亮, 亮, 亮] = 7 (111); [暗, 暗, 暗] = 0 (000)。
2. 數據結構 (Data Structure)
一個完整的傳輸循環稱為一個「封包 (Packet)」，其規格如下：

總長度: 96 bits。
影格數: 32 幀（每幀 3 bits）。
結構分佈:
前導碼 (Preamble): 12 bits（用於同步）。
核心 ID: 16 bits（目標唯一識別碼）。
載荷/保留位: 52 bits。
循環冗餘校驗 (CRC16): 16 bits。
3. 同步機制 (Synchronization)
由於網頁端影格率 (FPS) 可能波動且無法精準對齊發送端時鐘，我們使用「強前導碼」策略：

模式: [7, 0, 7, 0]。
邏輯: 接收端在緩衝區中持續尋找此特定序列。一旦匹配，即確定封包的起始位置，隨後讀取接下來的固定影格數。
4. 軟體解析技術 (Software Decoding)
自適應門檻 (Adaptive Thresholding)
環境光源與相機自動曝光 (AE) 會改變影像亮度。軟體會：

追蹤每顆 LED 的歷史最高與最低亮度。
動態計算門檻值：Threshold = Min + (Max - Min) * 50%。
有效過濾環境背景光與設備移動造成的干擾。
相機約束控制
為了使 LED 調變在影格中清晰可見，必須控制相機感測器：

短曝光 (Short Exposure): 鎖定在 ~1/50s。避免曝光時間過長導致 LED 信號被運動模糊或周圍光過度曝光抹平。
固定 ISO: 鎖定在 ~750。確保亮度提取的增益穩定，不隨畫面內容波動。
5. 錯誤校驗 (Error Validation)
數據傳輸過程中可能因遮擋或雜訊導致丟幀：

CRC16-IBM: 系統對收到的 96-bit 數據進行校驗。
丟棄策略: 若 CRC 驗證失敗，系統將丟棄該次結果並重新尋找前導碼，確保最終輸出的 ID 100% 正確。
本技術由 Antigravity 團隊設計，旨在 Web 端提供穩定的人眼不可見光通訊 (VLC) 體驗。