# 6DoF定位系統測試檢查清單

## ✅ 整合驗證

### 1. 代碼完整性
- [x] BlueLEDDetector 類別 (app.js:23)
- [x] GeometryMatcher 類別 (app.js:150)
- [x] SimpleKalman 類別 (app.js:230)
- [x] PnPSolver 類別 (app.js:271)
- [x] LED6DoFLocalizer 類別 (app.js:394)
- [x] initLocalizer 函數 (app.js:758)
- [x] autoDetectWithEnhancedLocalizer 函數 (app.js:1476)
- [x] updateLocalizationUI 函數 (app.js:1659)
- [x] 增強版drawOverlay (app.js:830+)
- [x] 即時處理更新 (processFrame)

### 2. 狀態管理
- [x] state.localizer 變數
- [x] state.useEnhancedLocalizer 標誌
- [x] 相機啟動時自動初始化定位器
- [x] HSV參數變更自動更新定位器

### 3. UI整合
- [x] 5-LED可視化（顏色編碼）
- [x] 矩形連線繪製
- [x] 突出LED連線（虛線）
- [x] 定位資訊顯示
- [x] 穩定性指標顯示

---

## 🧪 功能測試清單

### 基礎功能測試

#### Test 1: 相機啟動
- [ ] 打開瀏覽器訪問應用
- [ ] 點擊 "Start Camera"
- [ ] 確認相機畫面正常顯示
- [ ] 檢查控制台是否顯示 "6DoF定位器已初始化"

#### Test 2: HSV自動校準
- [ ] 將5-LED設備放在畫面中央（2-3公尺）
- [ ] 點擊 "自動校準 HSV"
- [ ] 確認HSV滑桿自動調整
- [ ] 檢查是否顯示 "HSV 校準完成"

#### Test 3: 手動自動檢測
- [ ] 勾選 "只顯示定位LED" 模式
- [ ] 點擊 "開始自動偵測"
- [ ] 確認5個LED點被正確標記（1-5）
- [ ] LED5應為綠色，其他為藍色
- [ ] 檢查矩形和虛線連線是否繪製

#### Test 4: 定位數據顯示
- [ ] 檢查 "位置" 顯示 X, Y, Z 值
- [ ] 檢查 "旋轉" 顯示 Roll, Pitch, Yaw
- [ ] 檢查 "距離" 顯示公尺數
- [ ] 檢查 "穩定性" 百分比顯示

---

## 🎯 進階測試

### 距離測試

#### Test 5: 1公尺距離
- [ ] 將LED設備放置在1公尺處
- [ ] 啟動自動檢測
- [ ] 記錄檢測成功率: ____%
- [ ] 記錄顯示距離: ____ m
- [ ] 記錄穩定性: ____%

#### Test 6: 3公尺距離
- [ ] 將LED設備放置在3公尺處
- [ ] 啟動自動檢測
- [ ] 記錄檢測成功率: ____%
- [ ] 記錄顯示距離: ____ m
- [ ] 記錄穩定性: ____%

#### Test 7: 5公尺距離
- [ ] 將LED設備放置在5公尺處
- [ ] 啟動自動檢測
- [ ] 記錄檢測成功率: ____%
- [ ] 記錄顯示距離: ____ m
- [ ] 記錄穩定性: ____%

### 角度測試

#### Test 8: 正面視角（0°）
- [ ] 正面對準LED設備
- [ ] 檢查Roll接近0°
- [ ] 檢查Pitch接近0°
- [ ] 檢查Yaw接近0°

#### Test 9: 側面視角（45°）
- [ ] 從側面45°角度觀看
- [ ] 記錄Yaw值: ____ °
- [ ] 確認幾何仍能匹配

#### Test 10: 移動追蹤
- [ ] 啟動自動檢測
- [ ] 緩慢左右移動相機
- [ ] 確認LED追蹤穩定
- [ ] 記錄穩定性變化

---

## 🔧 參數調整測試

### HSV參數測試

#### Test 11: 低光照環境
- [ ] 降低環境光
- [ ] 調整 Val Min 降低（例如0.50）
- [ ] 測試檢測效果
- [ ] 記錄最佳參數: Hue(___-___), Sat(_.__), Val(_.__)

#### Test 12: 強光環境
- [ ] 增加環境光
- [ ] 調整曝光時間
- [ ] 測試檢測效果
- [ ] 記錄最佳參數: Exposure(____), ISO(____)

### 濾波參數測試

#### Test 13: 卡爾曼濾波效果
- [ ] 觀察LED點抖動
- [ ] 檢查平滑效果
- [ ] 記錄穩定性提升: 從____%到____%

---

## 🐛 錯誤處理測試

### 異常情況

#### Test 14: LED遮擋
- [ ] 遮擋LED5（突出點）
- [ ] 確認顯示 "檢測到4個點，需要5個"
- [ ] 移除遮擋，確認自動恢復

#### Test 15: LED數量不足
- [ ] 遮擋2個LED
- [ ] 確認顯示 "檢測到3個點，需要5個"
- [ ] 檢查是否正確降級處理

#### Test 16: 幾何不符
- [ ] 移動到極端角度（>60°）
- [ ] 確認顯示幾何錯誤信息
- [ ] 檢查不會崩潰

#### Test 17: OpenCV未載入
- [ ] 在OpenCV載入前嘗試定位
- [ ] 確認顯示 "OpenCV 尚未就緒"
- [ ] 等待載入後自動恢復

---

## 📊 性能測試

### 幀率測試

#### Test 18: FPS測量
- [ ] 啟動自動檢測
- [ ] 記錄FPS: ____ fps
- [ ] 確認 >15 fps 為可接受

#### Test 19: CPU使用率
- [ ] 打開系統監視器
- [ ] 啟動自動檢測
- [ ] 記錄CPU使用率: ____%
- [ ] 確認不超過80%

### 內存測試

#### Test 20: 內存洩漏
- [ ] 運行自動檢測10分鐘
- [ ] 記錄初始內存: ____ MB
- [ ] 記錄最終內存: ____ MB
- [ ] 確認增長 <100 MB

---

## 🌐 瀏覽器兼容性

#### Test 21: Chrome
- [ ] 版本: ________
- [ ] 基礎功能: ✅/❌
- [ ] 自動檢測: ✅/❌
- [ ] 定位精度: ✅/❌

#### Test 22: Safari
- [ ] 版本: ________
- [ ] 基礎功能: ✅/❌
- [ ] 自動檢測: ✅/❌
- [ ] 定位精度: ✅/❌

#### Test 23: Firefox
- [ ] 版本: ________
- [ ] 基礎功能: ✅/❌
- [ ] 自動檢測: ✅/❌
- [ ] 定位精度: ✅/❌

---

## 📱 移動設備測試

#### Test 24: iOS Safari
- [ ] 設備: ________
- [ ] 相機訪問: ✅/❌
- [ ] LED檢測: ✅/❌
- [ ] 限制說明: ________________

#### Test 25: Android Chrome
- [ ] 設備: ________
- [ ] 相機訪問: ✅/❌
- [ ] LED檢測: ✅/❌
- [ ] 性能表現: ________________

---

## ✏️ 測試結果總結

### 成功的功能
1. ________________
2. ________________
3. ________________

### 發現的問題
1. ________________
2. ________________
3. ________________

### 改進建議
1. ________________
2. ________________
3. ________________

### 測試日期
- 測試者: ________________
- 日期: ________________
- 設備: ________________
- 環境: ________________

---

## 📝 備註

請在測試過程中記錄任何異常行為或意外發現。所有問題請記錄到專案的 Issue 追蹤系統中。

測試完成後，請將此檢查清單與測試報告一起提交。
